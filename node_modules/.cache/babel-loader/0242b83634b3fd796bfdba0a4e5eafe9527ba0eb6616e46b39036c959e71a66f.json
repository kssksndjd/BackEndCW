{"ast":null,"code":"import \"core-js/modules/esnext.iterator.map.js\";\nexport default {\n  props: [\"cart\"],\n  data() {\n    return {\n      name: \"\",\n      phone: \"\",\n      checkoutMessage: \"\"\n    };\n  },\n  methods: {\n    checkout() {\n      const order = {\n        name: this.name,\n        phone: this.phone,\n        items: this.cart.map(lesson => ({\n          lessonId: lesson._id,\n          subject: lesson.subject,\n          quantity: lesson.quantity || 1 // Include quantity\n        }))\n      };\n      fetch(\"http://localhost:3000/orders\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(order)\n      }).then(() => {\n        this.checkoutMessage = \"Order placed successfully!\";\n        this.cart.length = 0; // Clear the cart after checkout\n      }).catch(error => {\n        console.error(\"Checkout error:\", error);\n        this.checkoutMessage = \"Error placing the order. Please try again.\";\n      });\n    }\n  },\n  computed: {\n    isCheckoutValid() {\n      const nameValid = /^[A-Za-z\\s]+$/.test(this.name);\n      const phoneValid = /^[0-9]+$/.test(this.phone);\n      return nameValid && phoneValid && this.cart.length > 0;\n    }\n  }\n};","map":{"version":3,"names":["props","data","name","phone","checkoutMessage","methods","checkout","order","items","cart","map","lesson","lessonId","_id","subject","quantity","fetch","method","headers","body","JSON","stringify","then","length","catch","error","console","computed","isCheckoutValid","nameValid","test","phoneValid"],"sources":["/Users/lyphilong/Desktop/FullStack/project/src/components/ShoppingCart.vue"],"sourcesContent":["<template>\n  <!-- ... -->\n  <div v-if=\"cart.length > 0\">\n    <h3>Checkout</h3>\n    <div class=\"form-group\">\n      <label for=\"name\">Name</label>\n      <input type=\"text\" id=\"name\" class=\"form-control\" v-model=\"name\" placeholder=\"Enter your name\" />\n    </div>\n    <div class=\"form-group\">\n      <label for=\"phone\">Phone</label>\n      <input type=\"text\" id=\"phone\" class=\"form-control\" v-model=\"phone\" placeholder=\"Enter your phone number\" />\n    </div>\n    <button class=\"btn btn-success\" :disabled=\"!isCheckoutValid\" @click=\"checkout\">\n      Submit Order\n    </button>\n    <p v-if=\"checkoutMessage\" class=\"alert alert-info mt-3\">{{ checkoutMessage }}</p>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: [\"cart\"],\n  data() {\n    return {\n      name: \"\",\n      phone: \"\",\n      checkoutMessage: \"\",\n    };\n  },\n  methods: {\n    checkout() {\n      const order = {\n        name: this.name,\n        phone: this.phone,\n        items: this.cart.map((lesson) => ({\n          lessonId: lesson._id,\n          subject: lesson.subject,\n          quantity: lesson.quantity || 1, // Include quantity\n        })),\n      };\n\n      fetch(\"http://localhost:3000/orders\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(order),\n      })\n        .then(() => {\n          this.checkoutMessage = \"Order placed successfully!\";\n          this.cart.length = 0; // Clear the cart after checkout\n        })\n        .catch((error) => {\n          console.error(\"Checkout error:\", error);\n          this.checkoutMessage = \"Error placing the order. Please try again.\";\n        });\n    },\n  },\n  computed: {\n    isCheckoutValid() {\n      const nameValid = /^[A-Za-z\\s]+$/.test(this.name);\n      const phoneValid = /^[0-9]+$/.test(this.phone);\n      return nameValid && phoneValid && this.cart.length > 0;\n    },\n  },\n};\n</script>\n"],"mappings":";AAoBA,eAAe;EACbA,KAAK,EAAE,CAAC,MAAM,CAAC;EACfC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,EAAE;MACRC,KAAK,EAAE,EAAE;MACTC,eAAe,EAAE;IACnB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,QAAQA,CAAA,EAAG;MACT,MAAMC,KAAI,GAAI;QACZL,IAAI,EAAE,IAAI,CAACA,IAAI;QACfC,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBK,KAAK,EAAE,IAAI,CAACC,IAAI,CAACC,GAAG,CAAEC,MAAM,KAAM;UAChCC,QAAQ,EAAED,MAAM,CAACE,GAAG;UACpBC,OAAO,EAAEH,MAAM,CAACG,OAAO;UACvBC,QAAQ,EAAEJ,MAAM,CAACI,QAAO,IAAK,CAAC,CAAE;QAClC,CAAC,CAAC;MACJ,CAAC;MAEDC,KAAK,CAAC,8BAA8B,EAAE;QACpCC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACd,KAAK;MAC5B,CAAC,EACEe,IAAI,CAAC,MAAM;QACV,IAAI,CAAClB,eAAc,GAAI,4BAA4B;QACnD,IAAI,CAACK,IAAI,CAACc,MAAK,GAAI,CAAC,EAAE;MACxB,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;QAChBC,OAAO,CAACD,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;QACvC,IAAI,CAACrB,eAAc,GAAI,4CAA4C;MACrE,CAAC,CAAC;IACN;EACF,CAAC;EACDuB,QAAQ,EAAE;IACRC,eAAeA,CAAA,EAAG;MAChB,MAAMC,SAAQ,GAAI,eAAe,CAACC,IAAI,CAAC,IAAI,CAAC5B,IAAI,CAAC;MACjD,MAAM6B,UAAS,GAAI,UAAU,CAACD,IAAI,CAAC,IAAI,CAAC3B,KAAK,CAAC;MAC9C,OAAO0B,SAAQ,IAAKE,UAAS,IAAK,IAAI,CAACtB,IAAI,CAACc,MAAK,GAAI,CAAC;IACxD;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}