{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  class: \"form-group\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"alert alert-info mt-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\" ... \"), $props.cart.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[5] || (_cache[5] = _createElementVNode(\"h3\", null, \"Checkout\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_cache[3] || (_cache[3] = _createElementVNode(\"label\", {\n    for: \"name\"\n  }, \"Name\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.name = $event),\n    placeholder: \"Enter your name\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.name]])]), _createElementVNode(\"div\", _hoisted_3, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    for: \"phone\"\n  }, \"Phone\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"phone\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.phone = $event),\n    placeholder: \"Enter your phone number\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.phone]])]), _createElementVNode(\"button\", {\n    class: \"btn btn-success\",\n    disabled: !$options.isCheckoutValid,\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.checkout && $options.checkout(...args))\n  }, \" Submit Order \", 8 /* PROPS */, _hoisted_4), $data.checkoutMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_5, _toDisplayString($data.checkoutMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"names":["key","class","_createElementBlock","_Fragment","_createCommentVNode","$props","cart","length","_hoisted_1","_createElementVNode","_hoisted_2","for","type","id","_cache","$event","$data","name","placeholder","_hoisted_3","phone","disabled","$options","isCheckoutValid","onClick","args","checkout","_hoisted_4","checkoutMessage","_hoisted_5","_toDisplayString"],"sources":["/Users/lyphilong/Desktop/FullStack/project/src/components/ShoppingCart.vue"],"sourcesContent":["<template>\n  <!-- ... -->\n  <div v-if=\"cart.length > 0\">\n    <h3>Checkout</h3>\n    <div class=\"form-group\">\n      <label for=\"name\">Name</label>\n      <input type=\"text\" id=\"name\" class=\"form-control\" v-model=\"name\" placeholder=\"Enter your name\" />\n    </div>\n    <div class=\"form-group\">\n      <label for=\"phone\">Phone</label>\n      <input type=\"text\" id=\"phone\" class=\"form-control\" v-model=\"phone\" placeholder=\"Enter your phone number\" />\n    </div>\n    <button class=\"btn btn-success\" :disabled=\"!isCheckoutValid\" @click=\"checkout\">\n      Submit Order\n    </button>\n    <p v-if=\"checkoutMessage\" class=\"alert alert-info mt-3\">{{ checkoutMessage }}</p>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: [\"cart\"],\n  data() {\n    return {\n      name: \"\",\n      phone: \"\",\n      checkoutMessage: \"\",\n    };\n  },\n  methods: {\n    checkout() {\n      const order = {\n        name: this.name,\n        phone: this.phone,\n        items: this.cart.map((lesson) => ({\n          lessonId: lesson._id,\n          subject: lesson.subject,\n          quantity: lesson.quantity || 1, // Include quantity\n        })),\n      };\n\n      fetch(\"http://localhost:3000/orders\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(order),\n      })\n        .then(() => {\n          this.checkoutMessage = \"Order placed successfully!\";\n          this.cart.length = 0; // Clear the cart after checkout\n        })\n        .catch((error) => {\n          console.error(\"Checkout error:\", error);\n          this.checkoutMessage = \"Error placing the order. Please try again.\";\n        });\n    },\n  },\n  computed: {\n    isCheckoutValid() {\n      const nameValid = /^[A-Za-z\\s]+$/.test(this.name);\n      const phoneValid = /^[0-9]+$/.test(this.phone);\n      return nameValid && phoneValid && this.cart.length > 0;\n    },\n  },\n};\n</script>\n"],"mappings":";;EAAAA,GAAA;AAAA;;EAISC,KAAK,EAAC;AAAY;;EAIlBA,KAAK,EAAC;AAAY;mBAR3B;;EAAAD,GAAA;EAe8BC,KAAK,EAAC;;;uBAfpCC,mBAAA,CAAAC,SAAA,SACEC,mBAAA,SAAY,EACDC,MAAA,CAAAC,IAAI,CAACC,MAAM,Q,cAAtBL,mBAAA,CAcM,OAhBRM,UAAA,G,0BAGIC,mBAAA,CAAiB,YAAb,UAAQ,sBACZA,mBAAA,CAGM,OAHNC,UAGM,G,0BAFJD,mBAAA,CAA8B;IAAvBE,GAAG,EAAC;EAAM,GAAC,MAAI,sB,gBACtBF,mBAAA,CAAiG;IAA1FG,IAAI,EAAC,MAAM;IAACC,EAAE,EAAC,MAAM;IAACZ,KAAK,EAAC,cAAc;IANvD,uBAAAa,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAMiEC,KAAA,CAAAC,IAAI,GAAAF,MAAA;IAAEG,WAAW,EAAC;iDAAlBF,KAAA,CAAAC,IAAI,E,KAEjER,mBAAA,CAGM,OAHNU,UAGM,G,0BAFJV,mBAAA,CAAgC;IAAzBE,GAAG,EAAC;EAAO,GAAC,OAAK,sB,gBACxBF,mBAAA,CAA2G;IAApGG,IAAI,EAAC,MAAM;IAACC,EAAE,EAAC,OAAO;IAACZ,KAAK,EAAC,cAAc;IAVxD,uBAAAa,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAUkEC,KAAA,CAAAI,KAAK,GAAAL,MAAA;IAAEG,WAAW,EAAC;iDAAnBF,KAAA,CAAAI,KAAK,E,KAEnEX,mBAAA,CAES;IAFDR,KAAK,EAAC,iBAAiB;IAAEoB,QAAQ,GAAGC,QAAA,CAAAC,eAAe;IAAGC,OAAK,EAAAV,MAAA,QAAAA,MAAA,UAAAW,IAAA,KAAEH,QAAA,CAAAI,QAAA,IAAAJ,QAAA,CAAAI,QAAA,IAAAD,IAAA,CAAQ;KAAE,gBAE/E,iBAdJE,UAAA,GAeaX,KAAA,CAAAY,eAAe,I,cAAxB1B,mBAAA,CAAiF,KAAjF2B,UAAiF,EAAAC,gBAAA,CAAtBd,KAAA,CAAAY,eAAe,oBAf9ExB,mBAAA,e,KAAAA,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}